<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<title>esp32osc configuration</title>
</head>

<body>
<div class="container">
<h1>esp32osc configuration</h1>

<div class="row mb-3"><div class="input-group col-sm-12">
	<span class="input-group-text">MAC</span>
	<input type="text" readonly class="form-control" id="macAddress" name="macAddress" value="%MAC_ADDRESS%">
	<span class="input-group-text">IPv4</span>
	<input type="text" readonly class="form-control" id="ipv4" name="ipv4" value="%IPV4%">
	<span class="input-group-text">Link speed</span>
	<input type="text" readonly class="form-control" id="linkSpeed" name="linkSpeed" value="%LINK_SPEED%Mbps">
</div></div>

<form>
	<div class="row mb-3"><div class="input-group col-sm-12">
		<span class="input-group-text">UDP listening port</span>
	  <input type="number" min=1025 max=65535 class="form-control" id="inPort" name="inPort" value="%IN_PORT%">
	</div></div>

	<div class="row mb-3"><div class="input-group col-sm-12">
		<span class="input-group-text">UDP destination host</span>
	  <input type="number" min=0 max=255 class="form-control" id="outHost0" name="outHost0" value="%OUT_HOST_0%">
	  <input type="number" min=0 max=255 class="form-control" id="outHost1" name="outHost1" value="%OUT_HOST_1%">
	  <input type="number" min=0 max=255 class="form-control" id="outHost2" name="outHost2" value="%OUT_HOST_2%">
	  <input type="number" min=0 max=255 class="form-control" id="outHost3" name="outHost3" value="%OUT_HOST_3%">
	</div></div>

	<div class="row mb-3"><div class="input-group col-sm-12">
		<span class="input-group-text">UDP destination port</span>
	  <input type="number" min=1025 max=65535 class="form-control" id="outPort" name="outPort" value="%OUT_PORT%">
	</div></div>

	<div class="row mb-3"><div class="input-group col-sm-12">
		<span class="input-group-text">OSC address</span>
		<span class="input-group-text">/</span>
	  <input type="text" class="form-control" id="oscAddress" name="oscAddress" value="%OSC_ADDRESS%">
	</div></div>

	<div class="row mb-3"><div class="col-sm-12">
	<button type="submit" class="btn btn-primary">Save</button>
	</div></div>
</form>

</div>
</body>
<script>
const form = document.forms[0];

form.addEventListener("submit", e => {
	e.preventDefault();
	new FormData(form);
});

form.addEventListener("formdata", e => {
	const data = e.formData;

	let xhr = new XMLHttpRequest();
	xhr.open("POST", "/");
	xhr.send(data);
});
</script>
</html>


